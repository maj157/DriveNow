<nav class="navbar">
  <div class="navbar-container">
    <!-- Logo and Site Name -->
    <a routerLink="/" class="navbar-brand">
      <img src="assets/images/logo.png" alt="DriveNow Logo" class="navbar-logo">
      <span class="navbar-title">DriveNow</span>
    </a>

    <!-- Mobile Toggle Button -->
    <button type="button" class="navbar-toggle" (click)="toggleMenu()" aria-label="Toggle navigation">
      <span class="toggle-icon"></span>
    </button>

    <!-- Navigation Links -->
    <div class="navbar-menu" [class.active]="isMenuOpen">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">Home</a>
        </li>
        <li class="nav-item">
          <a routerLink="/cars" routerLinkActive="active" class="nav-link">Find a Car</a>
        </li>
        <li class="nav-item">
          <a routerLink="/about" routerLinkActive="active" class="nav-link">About</a>
        </li>
        <li class="nav-item">
          <a routerLink="/reviews" routerLinkActive="active" class="nav-link">Reviews</a>
        </li>
        <li class="nav-item">
          <a routerLink="/contact" routerLinkActive="active" class="nav-link">Contact</a>
        </li>
      </ul>

      <!-- Auth Buttons -->
      <div class="navbar-auth">
        <ng-container *ngIf="(currentUser$ | async) as user; else loggedOut">
          <div class="user-menu" (clickOutside)="closeDropdown()">
            <span class="user-greeting">Hello, {{ user.firstName }}</span>
            <div class="dropdown">
              <button class="dropdown-toggle" (click)="toggleDropdown($event)">My Account</button>
              <div class="dropdown-menu" [class.show]="isDropdownOpen">
                <a routerLink="/profile" class="dropdown-item" (click)="closeDropdown()">My Profile</a>
                <a routerLink="/bookings" class="dropdown-item" (click)="closeDropdown()">My Bookings</a>
                <a routerLink="/invoices" class="dropdown-item" (click)="closeDropdown()">My Invoices</a>
                <div class="dropdown-divider"></div>
                <a routerLink="/reservation" class="dropdown-item" (click)="closeDropdown()">New Reservation</a>
                <a routerLink="/reviews" class="dropdown-item" (click)="closeDropdown()">Submit Review</a>
                <a routerLink="/chat" class="dropdown-item" (click)="closeDropdown()">Support Chat</a>
                <div class="dropdown-divider"></div>
                <a (click)="logout(); closeDropdown()" class="dropdown-item">Logout</a>
              </div>
            </div>
          </div>
        </ng-container>
        <ng-template #loggedOut>
          <a routerLink="/login" class="btn btn-login">Login</a>
          <a routerLink="/signup" class="btn btn-signup">Sign Up</a>
        </ng-template>
      </div>
    </div>
  </div>
</nav>
