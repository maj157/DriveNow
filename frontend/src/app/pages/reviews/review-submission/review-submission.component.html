<div class="review-submission-container">
  <h2>Write a Review</h2>
  
  <form [formGroup]="reviewForm" (ngSubmit)="onSubmit()" class="review-form">
    <!-- Star Rating -->
    <div class="form-group">
      <label>Rating</label>
      <div class="star-rating">
        <span 
          *ngFor="let i of [1,2,3,4,5]" 
          class="star" 
          [class.filled]="(hoverRating || currentRating) >= i"
          [class.active]="currentRating >= i"
          (click)="setRating(i)"
          (mouseenter)="setHoverRating(i)"
          (mouseleave)="resetHoverRating()"
        >
          â˜…
        </span>
        <span class="rating-label">
          {{ currentRating > 0 ? currentRating + ' out of 5 stars' : 'Click to rate' }}
        </span>
      </div>
      <div *ngIf="hasError('stars', 'required') && reviewForm.get('stars')?.touched" class="error-message">
        Please select a rating
      </div>
    </div>

    <!-- Comment -->
    <div class="form-group">
      <label for="comment">Your Review</label>
      <textarea
        id="comment"
        formControlName="comment"
        rows="5"
        placeholder="Share your experience with our rental service..."
      ></textarea>
      <div *ngIf="hasError('comment', 'required')" class="error-message">
        Please write a review
      </div>
      <div *ngIf="hasError('comment', 'minlength')" class="error-message">
        Review must be at least 10 characters
      </div>
      <div *ngIf="hasError('comment', 'maxlength')" class="error-message">
        Review cannot exceed 500 characters
      </div>
      <div class="character-count" [class.error]="reviewForm.get('comment')?.value?.length > 500">
        {{ reviewForm.get('comment')?.value?.length || 0 }}/500 characters
      </div>
    </div>

    <!-- Submit Button -->
    <button 
      type="submit" 
      [disabled]="reviewForm.invalid || isSubmitting"
      class="submit-button"
    >
      {{ isSubmitting ? 'Submitting...' : 'Submit Review' }}
    </button>

    <!-- Success Message -->
    <div *ngIf="success" class="success-message">
      <i class="fas fa-check-circle"></i> Thank you for your review! It has been submitted for moderation. Redirecting...
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="error-message">
      <i class="fas fa-exclamation-circle"></i> {{ error }}
    </div>
  </form>
</div>
